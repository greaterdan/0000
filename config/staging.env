# AIM Currency Staging Configuration
# ===================================

# Environment
NODE_ENV=staging
SERVICE_VERSION=1.0.0-staging
SERVICE_NAME=aim-currency-staging
SERVICE_REGION=us-east-1

# Server Configuration
PORT=3000
HOST=0.0.0.0
WORKERS=2
CLUSTER_MODE=false
MAX_CONNECTIONS=5000
KEEP_ALIVE_TIMEOUT=65000
HEADERS_TIMEOUT=66000

# Security Configuration
JWT_SECRET=staging-jwt-secret-key-not-for-production
JWT_EXPIRES_IN=3600
JWT_REFRESH_EXPIRES_IN=86400
BCRYPT_ROUNDS=10
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=500
RATE_LIMIT_SKIP_SUCCESSFUL_REQUESTS=false

# CORS Configuration
ALLOWED_ORIGINS=https://staging.aim-currency.com,https://staging-admin.aim-currency.com
ALLOWED_METHODS=GET,POST,PUT,DELETE,OPTIONS
ALLOWED_HEADERS=Content-Type,Authorization,X-Requested-With,Accept,Origin
CREDENTIALS=true

# Database Configuration
POSTGRES_URL=postgresql://aim_staging:staging_password@postgres-staging:5432/aim_staging
POSTGRES_POOL_MIN=3
POSTGRES_POOL_MAX=10
POSTGRES_POOL_IDLE_TIMEOUT=30000
POSTGRES_POOL_ACQUIRE_TIMEOUT=60000

# Redis Configuration
REDIS_URL=redis://redis-staging:6379
REDIS_PASSWORD=staging_redis_password
REDIS_DB=1
REDIS_KEY_PREFIX=aim-staging:
REDIS_TTL=1800

# NATS Configuration
NATS_URL=nats://nats-staging:4222
NATS_CLUSTER_ID=aim-staging-cluster
NATS_CLIENT_ID=aim-gateway-staging
NATS_MAX_RECONNECT_ATTEMPTS=5
NATS_RECONNECT_TIME_WAIT=2000
NATS_TIMEOUT=30000

# MinIO Configuration
MINIO_URL=http://minio-staging:9000
MINIO_ACCESS_KEY=staging_access_key
MINIO_SECRET_KEY=staging_minio_secret_key
MINIO_BUCKET=aim-staging
MINIO_REGION=us-east-1
MINIO_USE_SSL=false

# Service URLs
LEDGERD_URL=http://ledgerd-staging:3001
MINTD_URL=http://mintd-staging:3003
TREASURY_URL=http://treasury-staging:3004
AGENT_GATEWAY_URL=http://agent-gateway-staging:3008
DISPUTES_URL=http://disputes-staging:3012
ONRAMP_URL=http://onramp-staging:3013
VERIFIER_ADVANCED_URL=http://verifier-advanced-staging:3014
PQSIGNER_URL=http://pqsigner-staging:3000
LOGD_URL=http://logd-staging:3002
METERING_URL=http://metering-staging:3015
WEBHOOKD_URL=http://webhookd-staging:3016

# Logging Configuration
LOG_LEVEL=debug
LOG_FORMAT=json
LOG_DIR=/app/logs
LOG_ROTATION=true
LOG_MAX_SIZE=50m
LOG_MAX_FILES=7
LOG_COMPRESS=true
LOG_DATE_PATTERN=YYYY-MM-DD

# Monitoring Configuration
METRICS_ENABLED=true
METRICS_PORT=9090
METRICS_PATH=/metrics
HEALTH_CHECK_INTERVAL=15s
HEALTH_CHECK_TIMEOUT=5s
PROMETHEUS_PUSHGATEWAY_URL=http://prometheus-pushgateway-staging:9091

# Error Tracking
ERROR_TRACKING_ENABLED=true
SENTRY_DSN=https://your-staging-sentry-dsn@sentry.io/project-id
ERROR_SAMPLE_RATE=0.5
ERROR_MAX_REPORTS=5000

# Performance Configuration
PERFORMANCE_MONITORING=true
SLOW_QUERY_THRESHOLD=500
MEMORY_THRESHOLD=85
CPU_THRESHOLD=85
REQUEST_TIMEOUT=30000
RESPONSE_TIMEOUT=30000

# Business Configuration
MAX_TRANSFER_AMOUNT=100000000000
MIN_TRANSFER_AMOUNT=1
DAILY_TRANSFER_LIMIT=1000000000000
MAX_ACCOUNTS_PER_USER=5
ACCOUNT_CREATION_RATE_LIMIT=3
TRANSACTION_RATE_LIMIT=50

# Security Headers
SECURITY_HEADERS=true
HSTS_MAX_AGE=86400
HSTS_INCLUDE_SUBDOMAINS=false
HSTS_PRELOAD=false
X_FRAME_OPTIONS=SAMEORIGIN
X_CONTENT_TYPE_OPTIONS=nosniff
X_XSS_PROTECTION=1; mode=block
REFERRER_POLICY=strict-origin-when-cross-origin
CONTENT_SECURITY_POLICY=default-src 'self'

# SSL/TLS Configuration
SSL_ENABLED=true
SSL_CERT_PATH=/app/certs/staging-cert.pem
SSL_KEY_PATH=/app/certs/staging-key.pem
SSL_CA_PATH=/app/certs/staging-ca.pem
SSL_CIPHERS=ECDHE-RSA-AES256-GCM-SHA384:ECDHE-RSA-AES128-GCM-SHA256
SSL_PROTOCOLS=TLSv1.2,TLSv1.3

# Backup Configuration
BACKUP_ENABLED=true
BACKUP_SCHEDULE=0 3 * * *
BACKUP_RETENTION_DAYS=7
BACKUP_S3_BUCKET=aim-staging-backups
BACKUP_ENCRYPTION_KEY=staging-backup-encryption-key

# Disaster Recovery
DR_ENABLED=false
DR_REPLICATION_LAG_THRESHOLD=60
DR_FAILOVER_TIMEOUT=30
DR_BACKUP_SITE_URL=https://staging-backup.aim-currency.com

# Load Balancing
LOAD_BALANCER_ENABLED=false
LOAD_BALANCER_ALGORITHM=round_robin
LOAD_BALANCER_HEALTH_CHECK_INTERVAL=10s
LOAD_BALANCER_HEALTH_CHECK_TIMEOUT=5s
LOAD_BALANCER_HEALTH_CHECK_THRESHOLD=3

# Caching Configuration
CACHE_ENABLED=true
CACHE_TTL=1800
CACHE_MAX_SIZE=500
CACHE_STRATEGY=lru
CACHE_PERSISTENT=false

# Queue Configuration
QUEUE_ENABLED=true
QUEUE_CONCURRENCY=5
QUEUE_MAX_ATTEMPTS=3
QUEUE_BACKOFF_DELAY=5000
QUEUE_RETRY_DELAY=1000

# Webhook Configuration
WEBHOOK_ENABLED=true
WEBHOOK_TIMEOUT=10000
WEBHOOK_MAX_ATTEMPTS=3
WEBHOOK_RETRY_DELAY=5000
WEBHOOK_SIGNATURE_SECRET=staging-webhook-signature-secret

# API Configuration
API_VERSION=v1
API_RATE_LIMIT=500
API_RATE_LIMIT_WINDOW=900000
API_DOCUMENTATION_ENABLED=true
API_DOCUMENTATION_PATH=/api/docs

# Feature Flags
FEATURE_FLAGS_ENABLED=true
FEATURE_NEW_TRANSFER_UI=true
FEATURE_ADVANCED_ANALYTICS=true
FEATURE_REAL_TIME_NOTIFICATIONS=true
FEATURE_MULTI_CURRENCY=false

# External Services
EXTERNAL_SERVICES_ENABLED=true
EXCHANGE_RATE_API_URL=https://api.exchangerate-api.com/v4/latest
EXCHANGE_RATE_API_KEY=staging-exchange-rate-api-key
BLOCKCHAIN_API_URL=https://api.blockchain.info
BLOCKCHAIN_API_KEY=staging-blockchain-api-key

# Compliance
COMPLIANCE_ENABLED=true
AUDIT_LOG_ENABLED=true
AUDIT_LOG_RETENTION_DAYS=90
KYC_ENABLED=true
AML_ENABLED=true
GDPR_ENABLED=true

# Development/Testing
DEBUG_MODE=true
MOCK_EXTERNAL_SERVICES=false
TEST_MODE=false
PROFILING_ENABLED=true
